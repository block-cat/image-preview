{"version":3,"sources":["webpack://@block-cat/image-preview/webpack/bootstrap","webpack://@block-cat/image-preview/./forum.js","webpack://@block-cat/image-preview/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@block-cat/image-preview/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@block-cat/image-preview/./src/forum/components/ImagePreview.js","webpack://@block-cat/image-preview/./src/forum/index.js","webpack://@block-cat/image-preview/external \"flarum.core.compat['Component']\"","webpack://@block-cat/image-preview/external \"flarum.core.compat['components/TextEditor']\"","webpack://@block-cat/image-preview/external \"flarum.core.compat['extend']\""],"names":["ImagePreview","oninit","vnode","regExp","index","view","images","attrs","content","match","fullScreen","$","hasClass","m","onmouseup","finish","onmousemove","moveView","src","onload","init","onmousewheel","zoom","ondragstart","stop","onmousedown","start","onclick","zoomIn","stopPropagation","zoomInit","zoomOut","changeIndexPrev","bind","changeIndexNext","map","image","imageSelectHandler","e","document","querySelector","removeAttribute","path","id","split","scale","redraw","length","Component","target","x_prev","y_prev","currentX","currentY","width","height","preventDefault","app","forum","data","attributes","currentTarget","deltaY","Math","min","max","x_target","attribute","y_target","style","w","parentNode","offsetWidth","h","offsetHeight","left","slice","top","children","clientX","offsetLeft","clientY","offsetTop","transition","cursor","initializers","add","extend","TextEditor","prototype","push","value"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import Component from 'flarum/Component';\r\n\r\nexport default class ImagePreview extends Component {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        this.regExp = /(?<=\\[upl-image-preview url=)([\\w\\d:\\.&\\?\\/\\-_]*)(?=\\])/g;\r\n        this.index = 0;\r\n    }\r\n    view() {\r\n        this.images = this.attrs.content.match(this.regExp);\r\n        const fullScreen = $('#composer > div').hasClass(\"fullScreen\");\r\n        \r\n        return (\r\n            (this.images && fullScreen) ? \r\n            m('.ComposerBody-imagePreview',\r\n                m('.ImagePreview', \r\n                    m('.ImagePreview-currentImage', {onmouseup: finish, onmousemove: moveView}, \r\n                        m('img#img_view', {src: this.images[this.index], onload: init, onmousewheel: zoom, ondragstart: stop, onmousedown: start}),\r\n                        m('.zoomButtons', \r\n                            m('button', {onclick: zoomIn, onmouseup: stopPropagation},\r\n                                m('i.fas.fa-search-minus')\r\n                            ),\r\n                            m('button', {onclick: zoomInit, onmouseup: stopPropagation},\r\n                                m('i.fas.fa-search')\r\n                            ),\r\n                            m('button', {onclick: zoomOut, onmouseup: stopPropagation},\r\n                                m('i.fas.fa-search-plus')\r\n                            )\r\n                        ),\r\n                        m('button.Left', {onclick: this.changeIndexPrev.bind(this), onmouseup: stopPropagation},\r\n                            m('i.fas.fa-chevron-left')\r\n                        ),\r\n                        m('button.Right', {onclick: this.changeIndexNext.bind(this), onmouseup: stopPropagation},\r\n                            m('i.fas.fa-chevron-right')\r\n                        ),\r\n                    ),\r\n                    m('.ImagePreview-listImage',\r\n                        this.images.map((image, index,) => {\r\n                            return m('img.ImageListItem#PreviewItem-' + index, {src: image, onclick: this.imageSelectHandler.bind(this)})\r\n                        }),\r\n                    ),\r\n                )\r\n            ) : ''\r\n        );\r\n    }\r\n    imageSelectHandler(e) {\r\n        document.querySelector('#img_view').removeAttribute('style');\r\n        this.index = e.path[0].id.split('-')[1];\r\n        scale = 1;\r\n        m.redraw();\r\n    }\r\n    changeIndexPrev(e) {\r\n        document.querySelector('#img_view').removeAttribute('style');\r\n        this.index = this.index == 0 ? this.images.length - 1 : this.index - 1;\r\n        scale = 1;\r\n        m.redraw();\r\n    }\r\n    changeIndexNext(e) {\r\n        document.querySelector('#img_view').removeAttribute('style');\r\n        this.index = (this.index + 1) % this.images.length;\r\n        scale = 1;\r\n        m.redraw();\r\n    }\r\n}\r\n\r\nvar scale = 1;\r\nvar target = null;\r\nvar x_prev = 0, y_prev = 0, currentX = 0, currentY = 0, width = 0, height = 0;\r\n\r\nfunction init(e) {\r\n    e.preventDefault();\r\n    app.forum.data.attributes['block-cat-image-preview.imgWidth'] = e.currentTarget.width;\r\n    app.forum.data.attributes['block-cat-image-preview.imgHeight'] = e.currentTarget.height;\r\n}\r\n\r\nfunction zoom(e) {\r\n    e.preventDefault();\r\n\r\n    scale += e.deltaY * -0.01;\r\n    scale = Math.min(Math.max(1, scale), 3);\r\n\r\n    let x_target = app.forum.attribute('block-cat-image-preview.imgWidth');\r\n    let y_target = app.forum.attribute('block-cat-image-preview.imgHeight');\r\n\r\n    if (scale * x_target !== 0) {\r\n        e.currentTarget.style.width = (scale * x_target) + 'px';\r\n        e.currentTarget.style.height = (scale * y_target) + 'px';\r\n    }\r\n\r\n    width = scale * x_target;\r\n    height = scale * y_target;\r\n    let w = e.target.parentNode.offsetWidth;\r\n    let h = e.target.parentNode.offsetHeight;\r\n\r\n    currentX = e.currentTarget.style.left.slice(0,-2);\r\n    currentY = e.currentTarget.style.top.slice(0,-2);\r\n\r\n    currentX = Math.min(Math.max(w - width, currentX), 0);\r\n    currentY = Math.min(Math.max(h - height, currentY), 0);\r\n    e.currentTarget.style.left = currentX + 'px';\r\n    e.currentTarget.style.top = currentY + 'px';\r\n}\r\n\r\nfunction zoomIn(e) {\r\n    scale -= 1;\r\n    scale = Math.min(Math.max(1, scale), 3);\r\n  \r\n    let x_target = app.forum.attribute('block-cat-image-preview.imgWidth');\r\n    let y_target = app.forum.attribute('block-cat-image-preview.imgHeight');\r\n  \r\n    if (scale * x_target !== 0) {\r\n        e.currentTarget.parentNode.parentNode.children[0].style.width = (scale * x_target) + 'px';\r\n        e.currentTarget.parentNode.parentNode.children[0].style.height = (scale * y_target) + 'px';\r\n    }\r\n  \r\n    e.currentTarget.parentNode.parentNode.children[0].style.left = 0 + 'px';\r\n    e.currentTarget.parentNode.parentNode.children[0].style.top = 0 + 'px';\r\n}\r\n\r\nfunction zoomInit(e) {\r\n    scale = 1;\r\n  \r\n    let x_target = app.forum.attribute('block-cat-image-preview.imgWidth');\r\n    let y_target = app.forum.attribute('block-cat-image-preview.imgHeight');\r\n  \r\n    if (scale * x_target !== 0) {\r\n        e.currentTarget.parentNode.parentNode.children[0].style.width = (scale * x_target) + 'px';\r\n        e.currentTarget.parentNode.parentNode.children[0].style.height = (scale * y_target) + 'px';\r\n    }\r\n  \r\n    e.currentTarget.parentNode.parentNode.children[0].style.left = 0 + 'px';\r\n    e.currentTarget.parentNode.parentNode.children[0].style.top = 0 + 'px';\r\n}\r\n\r\nfunction zoomOut(e) {\r\n    scale += 1;\r\n    scale = Math.min(Math.max(1, scale), 3);\r\n  \r\n    let x_target = app.forum.attribute('block-cat-image-preview.imgWidth');\r\n    let y_target = app.forum.attribute('block-cat-image-preview.imgHeight');\r\n  \r\n    if (scale * x_target !== 0) {\r\n        e.currentTarget.parentNode.parentNode.children[0].style.width = (scale * x_target) + 'px';\r\n        e.currentTarget.parentNode.parentNode.children[0].style.height = (scale * y_target) + 'px';\r\n    }\r\n  \r\n    e.currentTarget.parentNode.parentNode.children[0].style.left = 0 + 'px';\r\n    e.currentTarget.parentNode.parentNode.children[0].style.top = 0 + 'px';\r\n}\r\n\r\nfunction start(e) {\r\n    target = e.currentTarget;\r\n    x_prev = e.clientX - target.offsetLeft;\r\n    y_prev = e.clientY - target.offsetTop;\r\n    width = target.offsetWidth;\r\n    height = target.offsetHeight;\r\n    target.style.transition = 'none';\r\n    target.style.transition = 'none';\r\n}\r\n  \r\nfunction moveView(e) {\r\n    e.preventDefault();\r\n    if (target !== null) {\r\n        target.style.cursor = 'grabbing';\r\n\r\n        currentX += e.clientX - x_prev - target.offsetLeft;\r\n        currentY += e.clientY - y_prev - target.offsetTop;\r\n\r\n        target.style.left = currentX + 'px';\r\n        target.style.top = currentY + 'px';\r\n    }\r\n}\r\n  \r\nfunction finish(e) {\r\n    e.preventDefault();\r\n    let w = e.currentTarget.offsetWidth;\r\n    let h = e.currentTarget.offsetHeight;\r\n\r\n    try {\r\n        currentX = target.style.left.slice(0,-2);\r\n        currentY = target.style.top.slice(0,-2);\r\n    \r\n        currentX = Math.min(Math.max(w - width, currentX), 0);\r\n        currentY = Math.min(Math.max(h - height, currentY), 0);\r\n      \r\n        target.style.transition = 'top 100ms';\r\n        target.style.transition = 'left 100ms';\r\n        target.style.left = currentX + 'px';\r\n        target.style.top = currentY + 'px';\r\n      \r\n        target.style.cursor = 'grab';\r\n    } catch {}\r\n\r\n    target = null;\r\n    e.stopPropagation();\r\n}\r\n  \r\nfunction stop() {\r\n    return false;\r\n}\r\n  \r\nfunction stopPropagation(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n}","import { extend } from 'flarum/extend';\r\nimport TextEditor from 'flarum/components/TextEditor';\r\nimport ImagePreview from './components/ImagePreview';\r\n\r\napp.initializers.add('block-cat/image-preview', () => {\r\n  extend(TextEditor.prototype, 'view', function(view) {\r\n    view.children[0].children.push(<ImagePreview content={this.value}/>);\r\n  });\r\n});","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['components/TextEditor'];","module.exports = flarum.core.compat['extend'];"],"sourceRoot":""}